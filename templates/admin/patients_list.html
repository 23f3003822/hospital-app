{% extends "base.html" %}
{% block page_title %}Admin - Patients{% endblock %}
{% block main_content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Patients</h2>
  <a class="btn btn-outline-primary" href="{{ url_for('route_show_admin_dashboard') }}">Back</a>
</div>
<form class="mb-3">
  <div class="input-group">
    <input name="q" class="form-control" placeholder="Search patient by name" value="{{ search_query }}">
    <button class="btn btn-outline-secondary" type="submit">Search</button>
  </div>
</form>
<table class="table">
  <thead>
    <tr><th>Patient ID</th><th>Name</th><th>Email</th><th>Actions</th></tr>
  </thead>
  <tbody>
    {% for p in patients %}
    <tr>
      <td>{{ p.id }}</td>
      <td>{{ p.name }}</td>
      <td>{{ p.email }}</td>
      <td>
        <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('route_show_admin_patient_detail', patient_id=p.id) }}">View / Edit</a>
      </td>
    </tr>
    {% endfor %}
    {% if patients|length == 0 %}
    <tr><td colspan="4">No patients yet</td></tr>
    {% endif %}
  </tbody>
</table>
<hr>
<h5>Add Patient</h5>
<form method="post" action="{{ url_for('route_admin_add_patient') }}">
  <div class="row g-2">
    <div class="col"><input name="add_name" class="form-control" placeholder="Name" required></div>
    <div class="col"><input name="add_email" class="form-control" placeholder="Username (email)" required></div>
    <div class="col"><input name="add_password" class="form-control" placeholder="Password" required></div>
  </div>
  <div class="mt-2 d-grid"><button class="btn btn-primary-action" type="submit">Add Patient</button></div>
</form>
{% endblock %}
