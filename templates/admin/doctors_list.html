{% extends "base.html" %}
{% block page_title %}Admin - Doctors{% endblock %}
{% block main_content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Doctors</h2>
  <a class="btn btn-outline-primary" href="{{ url_for('route_show_admin_dashboard') }}">Back</a>
</div>
<form class="mb-3">
  <div class="input-group">
    <input name="q" class="form-control" placeholder="Search doctor by name" value="{{ search_query }}">
    <button class="btn btn-outline-secondary" type="submit">Search</button>
  </div>
</form>
<table class="table">
  <thead>
    <tr><th>Doctor ID</th><th>Name</th><th>Specialization</th><th>Actions</th></tr>
  </thead>
  <tbody>
    {% for doc in doctors %}
    <tr>
      <td>{{ doc.id }}</td>
      <td>{{ doc.name }}</td>
      <td>{{ doc.specialization or '-' }}</td>
      <td>
        <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('route_show_admin_doctor_detail', doctor_id=doc.id) }}">View / Edit</a>
      </td>
    </tr>
    {% endfor %}
    {% if doctors|length == 0 %}
    <tr><td colspan="4">No doctors yet</td></tr>
    {% endif %}
  </tbody>
</table>
<hr>
<h5>Add Doctor</h5>
<form method="post" action="{{ url_for('route_admin_add_doctor') }}">
  <div class="row g-2">
    <div class="col"><input name="add_name" class="form-control" placeholder="Name" required></div>
    <div class="col"><input name="add_email" class="form-control" placeholder="Username (email)" required></div>
    <div class="col"><input name="add_password" class="form-control" placeholder="Password" required></div>
  </div>
  <div class="mt-2">
    <select name="add_specialization" class="form-select">
      <option value="">Specialization (optional)</option>
      {% for dep in departments %}
      <option value="{{ dep.id }}">{{ dep.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mt-2 d-grid"><button class="btn btn-primary-action" type="submit">Add Doctor</button></div>
</form>
{% endblock %}
